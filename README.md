# Mean Robust Optimization
This repository is by 
Irina Wang,
[Bartolomeo Stellato](https://stellato.io/),
Cole Becker,
and [Bart Van Parys](https://mitsloan.mit.edu/faculty/directory/bart-p-g-van-parys),
and contains the Python source code to
reproduce the experiments in our paper
"[Mean Robust Optimization](http://arxiv.org/abs/2207.10820)."

If you find this repository helpful in your publications,
please consider citing our paper.

## Introduction
Robust optimization is a tractable and expressive technique for decision-making under uncertainty, but it can lead to overly conservative decisions because of pessimistic assumptions on the uncertain parameters.
Wasserstein distributionally robust optimization can reduce conservatism by being closely data-driven, but it often leads to very large problems with prohibitive solution times.
We introduce mean robust optimization, a general framework that combines the best of both worlds by providing a trade-off between computational effort and conservatism.
Using machine learning, we define uncertainty sets and constraints around clustered data points, undergoing a significant size reduction while preserving key properties.
We show finite-sample performance guarantees and conditions for which clustering does not increase conservatism, and otherwise provide bounds on the effect on conservatism.
Numerical examples illustrate the high efficiency and performance preservation of our approach.

## Dependencies
+ Python 3.x/numpy/pandas
+ [Cvxpy](https://www.cvxpy.org/index.html)
+ [Mosek](https://www.mosek.com/)
+ [sklearn](https://scikit-learn.org/stable/modules/clustering.html#clustering)
+ [Joblib](https://joblib.readthedocs.io/en/latest/)

## Instructions
### Running experiments
Experiments can be run in their respective folders using the commands below, and by specifying a foldername where the results are to be stored.


Continuous portfolio: 
```
python portcont.py --foldername <path to folder>
```
Sparse portfolio:
```
python portMIP.py --foldername <path to folder>
```
Facility location:
```
python facility.py --foldername <path to folder>
```
Continuous newsvendor:
```
python main.py --foldername <path to folder>
```
Sparse newsvendor:
```
python newsMIP.py  --foldername <path to folder>
```
Quadratic concave:
```
python quadratic.py --foldername <path to folder>
```
Log-sum-exp concave:
```
python logsumexp.py --foldername <path to folder>
```

### Generating plots

After running the experiments above, plots can then be generated by running the code below, with the same foldername as before

```
python plots.py --foldername <path to folder>
```

### Generating synthetic data for the portfolio experiments
We use the "Rsafd" R package (Carmona [2020](https://r-forge.r-project.org/R/?group_id=592)) to generate correlated synthetic returns with a generalied Pareto fit. To replicate the procedure, run the file "generate_synthetic_data.R" in R. 